(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{185:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[s("p",[t._v("在介绍 content projection 之前，我们先来观察一下以下的表单。对于同一个系统来说，下面的两个表单的区别在于使用不同的标题。为了提高组件的复用性，我们可以把相同的部分抽成独立的组件，然后把不同的部分单独出来。")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("首先我们来定义 AuthFormComponent 组件：")]),t._v(" "),t._m(4),s("p",[t._v("然后我们在 AppComponent 组件中，使用上面定义的 AuthFormComponent 组件，具体如下：")]),t._v(" "),t._m(5),s("p",[t._v("对应的示例图如下：")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("如果你已经理解了上面的内容，那我们继续，假设对于注册表单，”提交“ 按钮的名称我们想改为 ”注册“，而登录表单的 ”提交“ 按钮，我们想改为 ”登录“。那要如何处理，你可能会想到以下的解决方案：")]),t._v(" "),t._m(9),s("p",[t._v("以上代码的运行结果：")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),s("p",[t._v("以上示例我们使用元素选择器，来实现选择性内容投影，最后的运行结果如下：")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),s("p",[t._v("接着我们来更新一下 AuthFormComponent 组件：")]),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),s("p",[t._v("为了能获取多个元素，首先我们需要更新一下 AppComponent 组件，即我们在模板中新增两个 AuthRememberComponent 组件，具体如下：")]),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),s("p",[t._v("在上面的示例中，ContentChildren 装饰器返回的是一个 QueryList 集合，在 ngAfterContentInit 生命周期钩子中，我们通过 QueryList 实例提供的 forEach 方法来遍历集合中的元素。QueryList 实例除了提供 forEach() 方法之外，它还提供了数组常用的方法，比如 map()、filter()、find()、some() 和 reduce() 等方法。")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),s("p",[t._v('这种行为有两个原因：期望一致性和性能。什么 "期望的一致性" 意味着作为开发人员，可以基于应用程序的代码，猜测其行为。假设我写了以下代码：')]),t._v(" "),t._m(38),s("p",[t._v("很显然计数器将被实例化一次，但现在假如我们使用第三方库的组件：")]),t._v(" "),t._m(39),s("p",[t._v("如果第三方库能够控制 counter 组件的生命周期，我将无法知道它被实例化了多少次。其中唯一方法就是查看第三方库的代码，了解它们的内部处理逻辑。将组件的生命周期被绑定到我们的应用程序组件而不是包装器的意义是，开发者可以掌控计数器只被实例化一次，而不用了解第三方库的内部代码。")]),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000010730597",target:"_blank",rel:"noopener noreferrer"}},[t._v("ng-content 中隐藏的内容"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://stackblitz.com/edit/ng-conf-2018-content-projection",target:"_blank",rel:"noopener noreferrer"}},[t._v("ng-conf-2018-content-projection"),s("OutboundLink")],1)])])])},[function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://cdn.semlinker.com/register-and-login-origin.jpg",alt:"register-and-login-origin"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("这虽然可以解决问题，但能够进一步提高组件的复用性么？即让用户能够灵活设置标题。答案是可以的，在 Angular 中引入了内容投影的概念，即通过使用 "),n("code",[this._v("<ng-content>")]),this._v(" 指令来实现内容投影的功能。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://cdn.semlinker.com/content-projection.png",alt:"content-projection"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("接下来我们来看一下，如何利用 "),n("code",[this._v("<ng-content>")]),this._v(" 指令实现上述的功能。")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Output"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EventEmitter "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"@angular/core"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"./auth-form.interface"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"auth-form"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <form (ngSubmit)="onSubmit(form.value)" #form="ngForm">\n        <ng-content></ng-content>\n        <label>\n          邮箱\n          <input type="email" name="email" ngModel>\n        </label>\n        <label>\n          密码\n          <input type="password" name="password" ngModel>\n        </label>\n        <button type="submit">\n          提交\n        </button>\n      </form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthFormComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{attrs:{class:"token function"}},[t._v("Output")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" submitted"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" EventEmitter"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EventEmitter")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{attrs:{class:"token function"}},[t._v("onSubmit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submitted"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("emit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"@angular/core"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"./auth-form/auth-form.interface"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"app-root"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <auth-form \n        (submitted)="createUser($event)">\n        <h3>注册</h3>\n      </auth-form>\n      <auth-form \n        (submitted)="loginUser($event)">\n        <h3>登录</h3>\n      </auth-form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AppComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("createUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token builtin"}},[t._v("console")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Create account"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{attrs:{class:"token function"}},[t._v("loginUser")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" User"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token builtin"}},[t._v("console")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Login"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://cdn.semlinker.com/auth-form.jpg",alt:"auth-form"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("这里我们来做个总结，包含在 "),n("code",[this._v("<auth-form>")]),this._v(" 标签内的内容，会被投影到 "),n("code",[this._v("AuthFormComponent")]),this._v(" 组件 "),n("code",[this._v("<ng-content>")]),this._v(" 所在区域。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"select-属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#select-属性","aria-hidden":"true"}},[this._v("#")]),this._v(" select 属性")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"app-root"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <auth-form \n        (submitted)="createUser($event)">\n        <h3>注册</h3>\n        <button type="submit">\n         注册\n        </button>\n      </auth-form>\n      <auth-form \n        (submitted)="loginUser($event)">\n        <h3>登录</h3>\n        <button type="submit">\n         登录\n        </button>\n      </auth-form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AppComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n  "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://cdn.semlinker.com/injection-slots-intro.jpg",alt:"injection-slots-intro"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("虽然我们实现了内容投影，即把标题和按钮都成功投影到 AuthFormComponent 组件中，但你会发现按钮的位置并不是预期的。那么如何解决这个问题呢？很庆幸地是，"),n("code",[this._v("<ng-content>")]),this._v(" 指令为我们提供了 "),n("code",[this._v("select")]),this._v(" 属性来设定投射的内容。")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Output"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EventEmitter "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"@angular/core"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"./auth-form.interface"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"auth-form"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <form (ngSubmit)="onSubmit(form.value)" #form="ngForm">\n        <ng-content select="h3"></ng-content>\n        <label>\n          邮箱\n          <input type="email" name="email" ngModel>\n        </label>\n        <label>\n          密码\n          <input type="password" name="password" ngModel>\n        </label>\n        <ng-content select="button"></ng-content>\n      </form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthFormComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("p",[s("code",[t._v("select")]),t._v(" 属性支持 CSS 选择器（my-element，.my-class，[my-attribute]，...）来匹配你想要的内容。如果 "),s("code",[t._v("ng-content")]),t._v(" 上没有设置 "),s("code",[t._v("select")]),t._v(" 属性，它将接收全部内容，或接收不匹配任何其他 "),s("code",[t._v("ng-content")]),t._v(" 元素的内容。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("img",{attrs:{src:"http://cdn.semlinker.com/injection-slots.jpg",alt:"injection-slots"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"组件投影"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#组件投影","aria-hidden":"true"}},[this._v("#")]),this._v(" 组件投影")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("code",[this._v("ng-content")]),this._v(" 指令除了支持标准的 HTML 标签外，还支持自定义指令。为了演示这个特性，我们先来新建一个 AuthRememberComponent 组件：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Output"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EventEmitter "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'auth-remember'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <label>\n      <input type="checkbox" (change)="onChecked($event.target.checked)">\n      Keep me logged in\n    </label>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthRememberComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  @"),s("span",{attrs:{class:"token function"}},[t._v("Output")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" EventEmitter"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EventEmitter")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{attrs:{class:"token function"}},[t._v("onChecked")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("emit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'auth-form'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <form (ngSubmit)="onSubmit(form.value)" #form="ngForm">\n        <ng-content select="h3"></ng-content>\n        <label>\n          邮箱\n          <input type="email" name="email" ngModel>\n        </label>\n        <label>\n          密码\n          <input type="password" name="password" ngModel>\n        </label>\n        <ng-content select="auth-remember"></ng-content>\n        <ng-content select="button"></ng-content>\n      </form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthFormComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("在 AuthFormComponent 组件模板中，我们新增了一行 "),n("code",[this._v('<ng-content select="auth-remember"></ng-content>')]),this._v("，用来设置投影的内容。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"contentchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#contentchild","aria-hidden":"true"}},[this._v("#")]),this._v(" ContentChild")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("上面我们已经介绍了内容投射的相关概念及 "),n("code",[this._v("<ng-content>")]),this._v(" 指令的常见用法。下面我们来介绍在组件内部，如何获取 "),n("code",[this._v("<ng-content>")]),this._v(" 投射的内容。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("在 Angular 中提供了 "),n("code",[this._v("ContentChild")]),this._v(" 装饰器来获取投影的元素。")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"auth-form"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <form (ngSubmit)="onSubmit(form.value)" #form="ngForm">\n        <ng-content select="h3"></ng-content>\n        <label>\n          Email address\n          <input type="email" name="email" ngModel>\n        </label>\n        <label>\n          Password\n          <input type="password" name="password" ngModel>\n        </label>\n        <ng-content select="auth-remember"></ng-content>\n        <div *ngIf="showMessage">\n          保持登录状态30天\n        </div>\n        <ng-content select="button"></ng-content>\n      </form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthFormComponent")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AfterContentInit")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  showMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  @"),s("span",{attrs:{class:"token function"}},[t._v("ContentChild")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthRememberComponent"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" AuthRememberComponent"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{attrs:{class:"token function"}},[t._v("ngAfterContentInit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showMessage "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("以上示例中，我们通过 "),n("code",[this._v("ContentChild(AuthRememberComponent)")]),this._v(" 来设置获取的组件类型，此外我们在生命周期钩子  "),n("code",[this._v("ngAfterContentInit")]),this._v(" 中通过订阅 remember 的 checked 输出属性来监听 checkbox 输入框的变化。同时根据 AuthRememberComponent 组件中 checkbox 的值来控制是否显示 ”保持登录30天“ 的提示消息。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"contentchildren"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#contentchildren","aria-hidden":"true"}},[this._v("#")]),this._v(" ContentChildren")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("除了 "),n("code",[this._v("ContentChild")]),this._v(" 装饰器之外，Angular 还为我们提供了一个 "),n("code",[this._v("ContentChildren")]),this._v(" 装饰器，用来从通过 Content Projection 方式设置的视图中获取匹配的多个元素，返回的结果是一个 QueryList 集合。")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[t._v("@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"app-root"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <auth-form \n        (submitted)="createUser($event)">\n        <h3>注册</h3>\n        <button type="submit">\n          注册\n        </button>\n      </auth-form>\n      <auth-form \n        (submitted)="loginUser($event)">\n        <h3>登录</h3>\n        <auth-remember (checked)="rememberUser($event)"></auth-remember>\n        <auth-remember (checked)="rememberUser($event)"></auth-remember>\n        <auth-remember (checked)="rememberUser($event)"></auth-remember>\n        <button type="submit">\n          登录\n        </button>\n      </auth-form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AppComponent")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("接着我们需要在 AuthFormComponent 组件中引入 "),n("code",[this._v("ContentChildren")]),this._v(" 装饰器，更新后的 AuthFormComponent 组件如下：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Output"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EventEmitter"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ContentChildren"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" QueryList"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AfterContentInit "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'@angular/core'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AuthRememberComponent "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./auth-remember.component'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'./auth-form.interface'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{attrs:{class:"token function"}},[t._v("Component")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  selector"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'auth-form'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v('`\n    <div>\n      <form (ngSubmit)="onSubmit(form.value)" #form="ngForm">\n        <ng-content select="h3"></ng-content>\n        <label>\n          邮箱\n          <input type="email" name="email" ngModel>\n        </label>\n        <label>\n          密码\n          <input type="password" name="password" ngModel>\n        </label>\n        <ng-content select="auth-remember"></ng-content>\n        <div *ngIf="showMessage">\n          保持登录30天\n        </div>\n        <ng-content select="button"></ng-content>\n      </form>\n    </div>\n  `')])]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AuthFormComponent")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AfterContentInit")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  showMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  @"),s("span",{attrs:{class:"token function"}},[t._v("ContentChildren")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthRememberComponent"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" QueryList"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("AuthRememberComponent"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  @"),s("span",{attrs:{class:"token function"}},[t._v("Output")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" submitted"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" EventEmitter"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EventEmitter")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{attrs:{class:"token function"}},[t._v("ngAfterContentInit")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remember"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("forEach")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        item"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showMessage "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" checked"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"ngprojectas"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngprojectas","aria-hidden":"true"}},[this._v("#")]),this._v(" ngProjectAs")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("有时候我们的定义的组件可能会包含在其它容器中，比如 "),n("code",[this._v("<ng-container>")]),this._v(" ，这时我们的目标投影会发生什么：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ng-container")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("auth-remember")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("(checked)")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("rememberUser($event)"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("auth-remember")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ng-container")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("当你刷新页面的时候，你会发现 AuthRememberComponent 组件已经消失了。因为 "),n("code",[this._v("ng-container")]),this._v(" 容器不再匹配 "),n("code",[this._v('select="auth-remember"')]),this._v("。为了解决这个问题，我们必须使用 "),n("code",[this._v("ngProjectAs")]),this._v(" 属性，它可以应用于任何元素上。使用方式如下：")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ng-container")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("ngProjectAs")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("auth-remember"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("auth-remember")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("(checked)")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("rememberUser($event)"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("auth-remember")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ng-container")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("通过设置 "),n("code",[this._v("ngProjectAs")]),this._v(" 属性，终于重新找回了我们的 AuthRememberComponent 组件。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("code",[this._v("<ng-content>")]),this._v(' 不会 "产生" 内容，它只是投影现有的内容。你可以认为它等价于 '),n("code",[this._v("node.appendChild(el)")]),this._v("或 jQuery 中的 "),n("code",[this._v("$(node).append(el)")]),this._v(" 方法：使用这些方法，节点不被克隆，它被简单地移动到它的新位置。因此，投影内容的生命周期将被绑定到它被声明的地方，而不是显示在地方。")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("my-wrapper"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("counter")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("counter")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("third-party-wrapper")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("counter")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("counter")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("third-party-wrapper")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("性能的原因更为重要。"),n("strong",[this._v("因为 "),n("code",[this._v("ng-content")]),this._v(" 只是移动元素，所以可以在编译时完成，而不是在运行时，这大大减少了实际应用程序的工作量")]),this._v("。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"参考资源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资源","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资源")])}],!1,null,null,null);e.options.__file="ng-content-projection.md";n.default=e.exports}}]);