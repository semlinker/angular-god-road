<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Conventional Commits 示例 | Angular 修仙之路</title>
    <meta name="description" content="修炼 Angular、RxJS、TypeScript 秘籍">
    
    
    <link rel="preload" href="/angular-god-road/assets/css/styles.4eaf616f.css" as="style"><link rel="preload" href="/angular-god-road/assets/js/app.4eaf616f.js" as="script"><link rel="preload" href="/angular-god-road/assets/js/43.e1f5311e.js" as="script"><link rel="prefetch" href="/angular-god-road/assets/css/1.styles.24fddc56.css"><link rel="prefetch" href="/angular-god-road/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/angular-god-road/assets/js/1.24fddc56.js"><link rel="prefetch" href="/angular-god-road/assets/js/10.edd26f16.js"><link rel="prefetch" href="/angular-god-road/assets/js/11.33f54712.js"><link rel="prefetch" href="/angular-god-road/assets/js/12.fcc87fd4.js"><link rel="prefetch" href="/angular-god-road/assets/js/13.fa6e9f88.js"><link rel="prefetch" href="/angular-god-road/assets/js/14.050d9df1.js"><link rel="prefetch" href="/angular-god-road/assets/js/15.9f880834.js"><link rel="prefetch" href="/angular-god-road/assets/js/16.b96760bb.js"><link rel="prefetch" href="/angular-god-road/assets/js/17.13fefc8b.js"><link rel="prefetch" href="/angular-god-road/assets/js/18.c850d375.js"><link rel="prefetch" href="/angular-god-road/assets/js/19.7239064a.js"><link rel="prefetch" href="/angular-god-road/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/angular-god-road/assets/js/20.4125efb9.js"><link rel="prefetch" href="/angular-god-road/assets/js/21.2a9e4d33.js"><link rel="prefetch" href="/angular-god-road/assets/js/22.f2cf7fbc.js"><link rel="prefetch" href="/angular-god-road/assets/js/23.7ff8e04e.js"><link rel="prefetch" href="/angular-god-road/assets/js/24.9f44b1b7.js"><link rel="prefetch" href="/angular-god-road/assets/js/25.0ec2854a.js"><link rel="prefetch" href="/angular-god-road/assets/js/26.7c66210d.js"><link rel="prefetch" href="/angular-god-road/assets/js/27.d9097f9d.js"><link rel="prefetch" href="/angular-god-road/assets/js/28.7d96a001.js"><link rel="prefetch" href="/angular-god-road/assets/js/29.4fc02651.js"><link rel="prefetch" href="/angular-god-road/assets/js/3.3d49ed81.js"><link rel="prefetch" href="/angular-god-road/assets/js/30.99a6671a.js"><link rel="prefetch" href="/angular-god-road/assets/js/31.2591ba92.js"><link rel="prefetch" href="/angular-god-road/assets/js/32.78ddd0be.js"><link rel="prefetch" href="/angular-god-road/assets/js/33.e9af0299.js"><link rel="prefetch" href="/angular-god-road/assets/js/34.c0d5a741.js"><link rel="prefetch" href="/angular-god-road/assets/js/35.284fb844.js"><link rel="prefetch" href="/angular-god-road/assets/js/36.1cb64f86.js"><link rel="prefetch" href="/angular-god-road/assets/js/37.b69ebefc.js"><link rel="prefetch" href="/angular-god-road/assets/js/38.048dd2ef.js"><link rel="prefetch" href="/angular-god-road/assets/js/39.9e4eec87.js"><link rel="prefetch" href="/angular-god-road/assets/js/4.ff267ab9.js"><link rel="prefetch" href="/angular-god-road/assets/js/40.9610211f.js"><link rel="prefetch" href="/angular-god-road/assets/js/41.ddd45347.js"><link rel="prefetch" href="/angular-god-road/assets/js/42.d2ebe819.js"><link rel="prefetch" href="/angular-god-road/assets/js/44.b5c3267a.js"><link rel="prefetch" href="/angular-god-road/assets/js/45.b34d49e9.js"><link rel="prefetch" href="/angular-god-road/assets/js/46.3602c3b6.js"><link rel="prefetch" href="/angular-god-road/assets/js/5.488dbe6d.js"><link rel="prefetch" href="/angular-god-road/assets/js/6.1c8c7528.js"><link rel="prefetch" href="/angular-god-road/assets/js/7.fc1d55b7.js"><link rel="prefetch" href="/angular-god-road/assets/js/8.0ebf2d9c.js"><link rel="prefetch" href="/angular-god-road/assets/js/9.dacb7e8b.js">
    <link rel="stylesheet" href="/angular-god-road/assets/css/1.styles.24fddc56.css"><link rel="stylesheet" href="/angular-god-road/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/angular-god-road/assets/css/styles.4eaf616f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/angular-god-road/" class="home-link router-link-active"><!----> <span class="site-name">Angular 修仙之路</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/angular-god-road/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://semlinker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端修仙之路
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/semlinker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/angular-god-road/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://semlinker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端修仙之路
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/semlinker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>入门篇</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>工具篇</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/angular-god-road/tool/ng-compodoc-intro.html" class="sidebar-link">Angular 工具篇之文档管理</a></li><li><a href="/angular-god-road/tool/ng-verson-manage.html" class="active sidebar-link">Angular 工具篇之规范化Git版本管理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/angular-god-road/tool/ng-vsc-debugger.html" class="sidebar-link">Angular 工具篇之VSCode调试</a></li><li><a href="/angular-god-road/tool/ng-storybook.html" class="sidebar-link">Angular 工具篇之Storybook</a></li><li><a href="/angular-god-road/tool/ng-translate-and-extract.html" class="sidebar-link">Angular 工具篇之国际化处理</a></li><li><a href="/angular-god-road/tool/ng-npx-and-ghpages.html" class="sidebar-link">Angular 工具篇之npx及angular-cli-ghpages</a></li><li><a href="/angular-god-road/tool/ng-bundle-analyzer.html" class="sidebar-link">Angular 工具篇之分析包的大小</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>元素篇</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其它</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>RxJS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>RxJS</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><p>目前很多的项目都已经使用 Git 作为版本控制工具，使用 Git 意味着我们每天都要与 Git Commit Message 打交道。Git Commit Message 看似简单，但实际却很重要。通过 Git Commit Message 我们可以快速地了解本次提交的信息，比如解决了哪个 Bug、优化了什么问题或新增了什么功能等。</p> <p>俗话说得好，无规矩不成方圆。因为 Git Commit Message 很重要，所以为了能够更好地进行项目开发与维护，我们就需要规范化 Git Commit Message，除此之外，规范化 Git Commit Message 还有以下的好处，比如：</p> <ul><li>自动化生成 CHANGELOG。</li> <li>基于提交的类型，自动决定语义化的版本变更。</li> <li>向同事、公众与其他利益关系人传达变化的性质。</li> <li>触发构建和部署流程。</li> <li>让人们更容易地探索结构化的提交历史，降低贡献项目的难度。</li></ul> <p>那么应该如何规范化 Git Commit Message，这里我们可以使用开源社区为我们总结出了一套名为 <a href="https://conventionalcommits.org/spec/v1.0.0-beta.2.html" target="_blank" rel="noopener noreferrer">Conventional Commits<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的书写规范，该规范受到了 <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit" target="_blank" rel="noopener noreferrer">Angular Commit Guidelines<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的启发，并在很大程度上以其为依据。它规定的格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;[optional scope]: &lt;description&gt;

[optional body]

[optional footer]
</code></pre></div><p>type 用于表示此次改动的类型，目前常用的主要有以下几种：</p> <ul><li><p>feat 新功能（feature）表示在代码库中新增了一个功能（这和语义化版本中的 <a href="http://semver.org/#summary" target="_blank" rel="noopener noreferrer"><code>MINOR</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相对应）</p></li> <li><p>fix 表示在代码库中修复了一个 bug（这和语义化版本中的 <a href="http://semver.org/#summary" target="_blank" rel="noopener noreferrer"><code>PATCH</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相对应）</p></li> <li><p>docs 文档（documentation）</p></li> <li><p>style (格式化, 缺失分号等; 不包括生产代码变动)</p></li> <li><p>refactor (重构代码)</p></li> <li><p>perf (性能优化)</p></li> <li><p>test (添加缺失的测试, 重构测试, 不包括生产代码变动)</p></li> <li><p>chore (更新grunt任务等; 不包括生产代码变动)</p></li></ul> <p>scope：一个可选的修改范围，用于标识此次提交主要涉及到代码中哪个模块。</p> <p>description：简明扼要描述本次提交的内容，首字母无需大写，结尾不需要使用 <code>.</code>。</p> <p>optional body：详细描述本次提交，比如此次变更的动机，如需换行，则使用 <code>|</code>。</p> <p>optional footer：描述与之关联的 issue 或 break change。</p> <h3 id="conventional-commits-示例"><a href="#conventional-commits-示例" aria-hidden="true" class="header-anchor">#</a> Conventional Commits 示例</h3> <ol><li>包含了描述与正文内破坏性变更的提交说明</li></ol> <div class="language- extra-class"><pre class="language-text"><code>feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
</code></pre></div><ol><li>不包含正文的提交说明</li></ol> <div class="language- extra-class"><pre class="language-text"><code>docs: correct spelling of CHANGELOG
</code></pre></div><ol><li>包含作用域的提交说明</li></ol> <div class="language- extra-class"><pre class="language-text"><code>feat(lang): added polish language
</code></pre></div><ol><li>为 fix 编写的提交说明，包含可选的 issue 编号</li></ol> <div class="language- extra-class"><pre class="language-text"><code>fix: minor typos in code

see the issue for details on the typos fixed

fixes issue #12
</code></pre></div><p>现在 Git Commit Message 规范已经找到了，但仅仅靠规范还是不能保证项目中的每个成员都遵循规范。这时我们还需要一个工具，能够智能地检测我们的 commit message 是否符合规范的要求。值得庆幸的是，现在已经有现成的工具了，它就是 <a href="http://marionebl.github.io/commitlint/" target="_blank" rel="noopener noreferrer">commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，接下来我们来介绍在项目中如何使用  <a href="http://marionebl.github.io/commitlint/" target="_blank" rel="noopener noreferrer">commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="commitlint-项目实战"><a href="#commitlint-项目实战" aria-hidden="true" class="header-anchor">#</a> commitlint 项目实战</h3> <p>首先我们要先安装 commitlint 以及 conventional 规范：</p> <div class="language-shell extra-class"><pre class="language-text"><code># Install commitlint cli and angular config
$ npm install --save-dev @commitlint/{config-conventional,cli}
# For Windows:
$ npm install --save-dev @commitlint/config-conventional @commitlint/cli
</code></pre></div><p>接着在命令行输入以下命令：</p> <div class="language-shell extra-class"><pre class="language-text"><code>echo &quot;module.exports = {extends: ['@commitlint/config-conventional']}&quot; &gt; commitlint.config.js
</code></pre></div><p>运行以上命令后项目会生成 commitlint.config.js。当然我们也可以手动创建 commitlint.config.js 文件，然后在文件内输入以下内容：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword">extends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p>现在我们已经完成了 commitlint 的配置，但我们还需要在每次提交时，自动触发 commitlint 进行规范检查。要实现这个功能，我们可以借助另一个工具 <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <blockquote><p>🐶 Git hooks made easy</p> <p>Husky can prevent bad <code>git commit</code>, <code>git push</code> and more 🐶 <em>woof!</em></p></blockquote> <p>husky 是一个增强的 git hooks 工具，它让我们可以在 git hook 的各个阶段运行 package.json 中设定的任务。</p> <p>下面我们继续来安装 husky：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm install --save-dev husky
</code></pre></div><p>安装完成后，我们需要在 package.json 文件中添加以下的配置项：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>完成上述的配置后，我们可以验证一下 commitlint 是否生效：</p> <ol><li>不符合规范的 commit message</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ git commit -m &quot;foo: this will fail&quot;
</code></pre></div><p>以上命令运行后，会输出以下信息：</p> <div class="language- extra-class"><pre class="language-text"><code>husky &gt; commit-msg (node v9.11.0)
⧗   input:
foo: this will fail

✖   type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum]
✖   found 1 problems, 0 warnings
husky &gt; commit-msg hook failed (add --no-verify to bypass)
</code></pre></div><ol><li>符合规范的 commit message</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>$ git commit -m &quot;chore: lint on commitmsg&quot;
</code></pre></div><p>以上命令运行后，会输出以下信息：</p> <div class="language- extra-class"><pre class="language-text"><code>usky &gt; commit-msg (node v9.11.0)
⧗   input: chore: lint on commitmsg
✔   found 0 problems, 0 warnings

[master 394dce6] chore: lint on commitmsg
</code></pre></div><p>如果我们项目的 Git Commit Message 严格遵守 conventional 规范，那么在发布版本时，我们就可以自动生成 CHANGELOG，这里我们可以使用的是 <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这款工具。</p> <blockquote><p>🏆 Replacement for <code>npm version</code> with automatic CHANGELOG generation</p></blockquote> <p>顾名思义，<a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 用于替代 <code>npm version</code>，同时还能自动生成 CHANGELOG。最后，我们来简单介绍一下 <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这款工具。</p> <h3 id="standard-version-简介"><a href="#standard-version-简介" aria-hidden="true" class="header-anchor">#</a> standard-version 简介</h3> <p>在介绍  <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 之前，我们先来简单了解一下 Semver（Semantic Versioning） 规范，该规范规定了版本号如何表示，如何增加，如何进行比较，不同的版本号意味着什么。</p> <p>版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p> <ul><li>主版本号（major）：当你做了不兼容的 API 修改。</li> <li>次版本号（minor）：当你做了向下兼容的功能性新增，可以理解为 Feature 版本。</li> <li>修订号（patch）：当你做了向下兼容的问题修正，可以理解为 Bug fix 版本。</li></ul> <p>**先行版本号及版本编译信息可以加到 “主版本号.次版本号.修订号” 的后面，作为延伸。**Semver 规范中使用alpha、beta、rc 来修饰即将要发布的版本。它们的含义是：</p> <ul><li>alpha：内部版本。</li> <li>beta：公测版本。</li> <li>rc：即 Release Candiate，正式版本的候选版本。</li></ul> <p>在发布 npm 包时，为了让我们更好的遵从 Semver 规范，npm 为我们提供了 npm version 命令，具体使用方式如下：</p> <ul><li>升级补丁版本号：npm version patch。</li> <li>升级小版本号：npm version minor。</li> <li>升级大版本号：npm version major。</li></ul> <p>关于 Semver(语义化版本号) 的相关内容，这里我们不再详细展开。感兴趣的同学，可以阅读 <a href="https://juejin.im/user/5a9f77666fb9a028c14a01eb" target="_blank" rel="noopener noreferrer">腾讯IVWEB团队<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 发布的 <a href="https://juejin.im/post/5ad413ba6fb9a028b5485866" target="_blank" rel="noopener noreferrer">Semver(语义化版本号)扫盲<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这篇文章。接下来我们开始介绍 standard-version 这款工具。</p> <p>首先以 local 模式安装 <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm install --save-dev standard-version
</code></pre></div><p>然后在 package.json 的 scripts 中添加以下配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard-version&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>若需要发布首个版本，则可以运行以下命令：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm run release -- --first-release
</code></pre></div><p>如果需要发布预发布版本，则可以使用 <code>--prerelease</code> 标志，比如：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm run release -- --prerelease
</code></pre></div><p>假设你当前最新的版本是 <code>v1.0.0</code>，在运行上述命令后，你的版本将变为 <code>v1.0.1-0</code>。此外，如果你的预发布版本要包含 <code>alpha</code> 前缀，你可以通过 <code>--prerelease &lt;name&gt;</code> 设定前缀：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm run release -- --prerelease alpha
</code></pre></div><p>此时，当前版本将变为 <code>1.0.1-alpha.0</code>。除了 <code>--first-release</code> 和 <code>--prerelease</code> 标识外，standard-version 还支持一个很有用的标志 <code>--release-as</code>，它支持三种不同的参数： <code>major</code>, <code>minor</code> 或 <code>patch</code>，使用方式如下：</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm run release -- --release-as minor
</code></pre></div><p>为了方便地进行版本发布，我们也可以在 npm scripts 中定义对应的任务，比如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;release:minor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard-version --release-as minor &amp;&amp; git push --follow-tags origin master&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;release:major&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard-version --release-as major &amp;&amp; git push --follow-tags origin master&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="参考资源"><a href="#参考资源" aria-hidden="true" class="header-anchor">#</a> 参考资源</h3> <ul><li><a href="https://conventionalcommits.org/spec/v1.0.0-beta.2.html#conventional-commits-100-beta2" target="_blank" rel="noopener noreferrer">conventional-commits-100-beta2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5ad413ba6fb9a028b5485866" target="_blank" rel="noopener noreferrer">Semver(语义化版本号)扫盲<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/angular-god-road/tool/ng-compodoc-intro.html" class="prev">
          Angular 工具篇之文档管理
        </a></span> <span class="next"><a href="/angular-god-road/tool/ng-vsc-debugger.html">
          Angular 工具篇之VSCode调试
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/angular-god-road/assets/js/43.e1f5311e.js" defer></script><script src="/angular-god-road/assets/js/app.4eaf616f.js" defer></script>
  </body>
</html>
